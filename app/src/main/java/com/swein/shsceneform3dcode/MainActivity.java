package com.swein.shsceneform3dcode;

import android.os.Bundle;
import android.widget.FrameLayout;

import androidx.fragment.app.FragmentActivity;

import com.swein.shsceneform3dcode.sceneformpart.SceneFormViewHolder;

public class MainActivity extends FragmentActivity {

    private final static String TAG = "MainActivity";

    private FrameLayout frameLayout;
    private SceneFormViewHolder sceneFormViewHolder;

    private String jsonObjectString;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        jsonObjectString = "{\"normalVectorOfPlaneX\":\"0.0\",\"normalVectorOfPlaneY\":\"-2.6622875\",\"normalVectorOfPlaneZ\":\"0.0\",\"floor\":{\"pointArray\":[{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"length\":\"0.44288293\"},{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"length\":\"0.61730146\"},{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"length\":\"0.7938606\"},{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"length\":\"0.8317946\"},{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"length\":\"0.7428548\"}],\"type\":\"FLOOR\"},\"ceiling\":{\"pointArray\":[{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"length\":\"0.4428829\"},{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"length\":\"0.6173015\"},{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"length\":\"0.7938606\"},{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"length\":\"0.8317946\"},{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"length\":\"0.7428548\"}],\"type\":\"CEILING\"},\"wallArray\":[{\"pointArray\":[{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"length\":\"0.44288293\"},{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"length\":\"1.15\"},{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"length\":\"0.4428829\"},{\"startPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"length\":\"1.15\"}],\"type\":\"WALL\"},{\"pointArray\":[{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"length\":\"0.61730146\"},{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"length\":\"1.15\"},{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"length\":\"0.6173015\"},{\"startPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.1500161\",\"z\":\"0.12004113\"},\"endPoint\":{\"x\":\"-0.42630434\",\"y\":\"1.6152859E-5\",\"z\":\"0.12004113\"},\"length\":\"1.15\"}],\"type\":\"WALL\"},{\"pointArray\":[{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"length\":\"0.7938606\"},{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"length\":\"1.15\"},{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"length\":\"0.7938606\"},{\"startPoint\":{\"x\":\"-0.83052826\",\"y\":\"1.1479322\",\"z\":\"-0.34649915\"},\"endPoint\":{\"x\":\"-0.83052826\",\"y\":\"-0.0020678043\",\"z\":\"-0.34649915\"},\"length\":\"1.15\"}],\"type\":\"WALL\"},{\"pointArray\":[{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"length\":\"0.8317946\"},{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"length\":\"1.1499997\"},{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"length\":\"0.8317946\"},{\"startPoint\":{\"x\":\"-0.5432865\",\"y\":\"1.1488123\",\"z\":\"-1.0865707\"},\"endPoint\":{\"x\":\"-0.5432865\",\"y\":\"-0.0011876822\",\"z\":\"-1.0865707\"},\"length\":\"1.15\"}],\"type\":\"WALL\"},{\"pointArray\":[{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"length\":\"0.7428548\"},{\"startPoint\":{\"x\":\"0.0\",\"y\":\"0.0\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"length\":\"1.15\"},{\"startPoint\":{\"x\":\"0.0\",\"y\":\"1.15\",\"z\":\"0.0\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"length\":\"0.7428548\"},{\"startPoint\":{\"x\":\"0.20097595\",\"y\":\"1.1506793\",\"z\":\"-0.7151514\"},\"endPoint\":{\"x\":\"0.20097595\",\"y\":\"6.7943335E-4\",\"z\":\"-0.7151514\"},\"length\":\"1.1499997\"}],\"type\":\"WALL\"}],\"wallObjectArray\":[{\"pointArray\":[{\"x\":\"-0.2926181\",\"y\":\"0.39861858\",\"z\":\"0.08239287\"},{\"x\":\"-0.13242902\",\"y\":\"0.39883605\",\"z\":\"0.0382905\"},{\"x\":\"-0.13296159\",\"y\":\"0.67084306\",\"z\":\"0.037697554\"},{\"x\":\"-0.2931507\",\"y\":\"0.67062557\",\"z\":\"0.081799865\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"-0.2926181\",\"y\":\"0.39861858\",\"z\":\"0.08239287\"},\"endPoint\":{\"x\":\"-0.13242902\",\"y\":\"0.39883605\",\"z\":\"0.0382905\"},\"length\":\"0.16614936\"},{\"startPoint\":{\"x\":\"-0.13242902\",\"y\":\"0.39883605\",\"z\":\"0.0382905\"},\"endPoint\":{\"x\":\"-0.13296159\",\"y\":\"0.67084306\",\"z\":\"0.037697554\"},\"length\":\"0.2720082\"},{\"startPoint\":{\"x\":\"-0.13296159\",\"y\":\"0.67084306\",\"z\":\"0.037697554\"},\"endPoint\":{\"x\":\"-0.2931507\",\"y\":\"0.67062557\",\"z\":\"0.081799865\"},\"length\":\"0.16614941\"},{\"startPoint\":{\"x\":\"-0.2931507\",\"y\":\"0.67062557\",\"z\":\"0.081799865\"},\"endPoint\":{\"x\":\"-0.2926181\",\"y\":\"0.39861858\",\"z\":\"0.08239287\"},\"length\":\"0.27200818\"}],\"type\":\"WINDOW\"},{\"pointArray\":[{\"x\":\"0.022711337\",\"y\":\"0.70336175\",\"z\":\"-0.08081323\"},{\"x\":\"0.124578096\",\"y\":\"0.7026204\",\"z\":\"-0.44834197\"},{\"x\":\"0.12560484\",\"y\":\"0.15120435\",\"z\":\"-0.44694495\"},{\"x\":\"0.023738094\",\"y\":\"0.15194577\",\"z\":\"-0.079416096\"}],\"segmentArray\":[{\"startPoint\":{\"x\":\"0.022711337\",\"y\":\"0.70336175\",\"z\":\"-0.08081323\"},\"endPoint\":{\"x\":\"0.124578096\",\"y\":\"0.7026204\",\"z\":\"-0.44834197\"},\"length\":\"0.38138533\"},{\"startPoint\":{\"x\":\"0.124578096\",\"y\":\"0.7026204\",\"z\":\"-0.44834197\"},\"endPoint\":{\"x\":\"0.12560484\",\"y\":\"0.15120435\",\"z\":\"-0.44694495\"},\"length\":\"0.5514188\"},{\"startPoint\":{\"x\":\"0.12560484\",\"y\":\"0.15120435\",\"z\":\"-0.44694495\"},\"endPoint\":{\"x\":\"0.023738094\",\"y\":\"0.15194577\",\"z\":\"-0.079416096\"},\"length\":\"0.3813854\"},{\"startPoint\":{\"x\":\"0.023738094\",\"y\":\"0.15194577\",\"z\":\"-0.079416096\"},\"endPoint\":{\"x\":\"0.022711337\",\"y\":\"0.70336175\",\"z\":\"-0.08081323\"},\"length\":\"0.5514188\"}],\"type\":\"DOOR\"}],\"height\":\"1.15\",\"floorFixedY\":\"-0.8285\",\"area\":\"0.78425086\",\"circumference\":\"3.4286945\",\"wallArea\":\"3.9429984\",\"volume\":\"0.9018885\",\"name\":\"ㅂㅂㅂ\",\"unit\":\"m\"}";

        findView();
        initSceneForm();
    }

    @Override
    protected void onPause() {
        if(sceneFormViewHolder != null) {
            sceneFormViewHolder.pause();
        }
        super.onPause();
    }

    @Override
    protected void onResume() {
        super.onResume();

        if(sceneFormViewHolder != null) {
            sceneFormViewHolder.resume();
        }
    }

    private void findView() {
        frameLayout = findViewById(R.id.frameLayout);
    }

    private void initSceneForm() {


        sceneFormViewHolder = new SceneFormViewHolder(this, jsonObjectString);
        frameLayout.addView(sceneFormViewHolder.view);
    }

    @Override
    protected void onDestroy() {

        if(sceneFormViewHolder != null) {
            sceneFormViewHolder.destroy();
            sceneFormViewHolder = null;
        }
        super.onDestroy();
    }
}